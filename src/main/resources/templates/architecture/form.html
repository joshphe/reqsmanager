<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>编辑架构信息</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>编辑架构信息</h1>
    <hr>
    <form th:action="@{/architecture/save}" th:object="${dto}" method="post">
        <!-- ... 其他字段保持不变 ... -->
        <input type="hidden" th:field="*{id}">
        <div class="form-group row">
            <label class="col-sm-3 col-form-label">需求编号</label>
            <div class="col-sm-9"><input type="text" th:field="*{reqId}" class="form-control-plaintext" readonly></div>
        </div>
        <div class="form-group row">
            <label class="col-sm-3 col-form-label">需求名称</label>
            <div class="col-sm-9"><input type="text" th:field="*{name}" class="form-control-plaintext" readonly></div>
        </div>
        <hr>
        <div class="form-group form-check">
            <input type="checkbox" th:field="*{hasArchPlan}" class="form-check-input">
            <label class="form-check-label">是否架构编写方案</label>
        </div>

        <!-- === START: 修复此部分 === -->
        <div class="form-row">
            <div class="form-group col-md-6">
                <label>方案交付日期</label>
                <input type="date" name="archPlanDeliveryDate" class="form-control"
                       th:value="${dto.archPlanDeliveryDate != null ? #temporals.format(dto.archPlanDeliveryDate, 'yyyy-MM-dd') : ''}">
            </div>
            <div class="form-group col-md-6">
                <label>方案评审时间</label>
                <!-- 修改 type 和 格式化字符串 -->
                <input type="date" name="archPlanReviewTime" class="form-control"
                       th:value="${dto.archPlanReviewTime != null ? #temporals.format(dto.archPlanReviewTime, 'yyyy-MM-dd') : ''}">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label>概要设计交付日期</label>
                <input type="date" name="designDeliveryDate" class="form-control"
                       th:value="${dto.designDeliveryDate != null ? #temporals.format(dto.designDeliveryDate, 'yyyy-MM-dd') : ''}">
            </div>
            <div class="form-group col-md-6">
                <label>概要设计评审时间</label>
                <!-- 修改 type 和 格式化字符串 -->
                <input type="date" name="designReviewTime" class="form-control"
                       th:value="${dto.designReviewTime != null ? #temporals.format(dto.designReviewTime, 'yyyy-MM-dd') : ''}">
            </div>
        </div>

        <div class="form-group">
            <label>代码Review时间</label>
            <!-- 修改 type 和 格式化字符串 -->
            <input type="date" name="codeReviewTime" class="form-control"
                   th:value="${dto.codeReviewTime != null ? #temporals.format(dto.codeReviewTime, 'yyyy-MM-dd') : ''}">
        </div>
        <!-- === END: 修复此部分 === -->

        <button type="submit" class="btn btn-primary">保存</button>
        <a th:href="@{/architecture/}" class="btn btn-secondary">取消</a>
    </form>
</div>
</body>
</html>
