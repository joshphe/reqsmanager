<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="content">
    <h1>主页看板</h1>
    <hr>
    <div class="row">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">需求总数量</div>
                <div class="card-body">
                    <h5 class="card-title" th:text="${totalRequirements}">0</h5>
                </div>
            </div>
        </div>
    </div>
    <!-- === START: 新增的分组指标表格 === -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5>各小组需求指标概览</h5>
                </div>
                <div class="card-body">
                    <table class="table table-striped table-hover">
                        <thead class="thead-light">
                        <tr>
                            <th>所属小组</th>
                            <th>需求总数</th>
                            <th>概要设计已递交数</th>
                            <th>概要设计平均分</th>
                            <th>详细设计已递交数</th>
                            <th>详细设计平均分</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:if="${#lists.isEmpty(groupMetrics)}">
                            <td colspan="6" class="text-center">暂无分组统计数据</td>
                        </tr>
                        <tr th:each="metric : ${groupMetrics}">
                            <td th:text="${metric.groupName}"></td>
                            <td th:text="${metric.totalRequirements}"></td>
                            <td th:text="${metric.summaryDesignsSubmitted}"></td>
                            <!-- 使用 #numbers.formatDecimal 格式化平均分，保留两位小数 -->
                            <td th:text="${metric.averageSummaryScore != null ? #numbers.formatDecimal(metric.averageSummaryScore, 1, 2) : 'N/A'}"></td>
                            <td th:text="${metric.detailedDesignsSubmitted}"></td>
                            <td th:text="${metric.averageDetailedScore != null ? #numbers.formatDecimal(metric.averageDetailedScore, 1, 2) : 'N/A'}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- === END: 新增 === -->
</div>
</body>
</html>
