<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>需求管理系统</title>

  <!-- 1. CSS 链接 -->
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
  <link rel="stylesheet"
        th:if="${view != null and (view.startsWith('requirements') or view.startsWith('analysis') or view.startsWith('architectural') or view.startsWith('arch-projects'))}"
        th:href="@{/css/requirements.css}">

  <!-- 2. 基础布局内联样式 -->
  <style>
    body { display: flex; }
    .sidebar {
      width: 220px; height: 100vh; position: fixed; top: 0; left: 0;
      background-color: #343a40; padding-top: 20px; z-index: 1031;
    }
    .sidebar .nav-link { color: #c2c7d0; }
    .sidebar .nav-link.active, .sidebar .nav-link:hover { color: #fff; background-color: #494e53; }
    .main-content {
      margin-left: 220px; padding: 20px; width: calc(100% - 220px);
    }
  </style>
</head>
<body>

<!-- 侧边栏 -->
<nav class="sidebar">
  <ul class="nav flex-column">
    <li class="nav-item"><a class="nav-link" th:href="@{/}" th:classappend="${view != null and view.startsWith('home') ? 'active' : ''}">主页</a></li>
    <li class="nav-item"><a class="nav-link" th:href="@{/requirements/}" th:classappend="${view != null and view.startsWith('requirements') ? 'active' : ''}">需求管理</a></li>
    <li class="nav-item"><a class="nav-link" th:href="@{/analysis/}" th:classappend="${view != null and view.startsWith('analysis') ? 'active' : ''}">需求分析管理</a></li>
    <li class="nav-item"><a class="nav-link" th:href="@{/architectural/}" th:classappend="${view != null and view.startsWith('architectural') ? 'active' : ''}">架构需求管理</a></li>
    <li class="nav-item"><a class="nav-link" th:href="@{/arch-projects/}" th:classappend="${view != null and view.startsWith('arch-projects') ? 'active' : ''}">架构项目管理</a></li>
  </ul>
  <div class="p-3 mt-auto">
    <form th:action="@{/logout}" method="post">
      <button type="submit" class="btn btn-outline-light btn-block">登出</button>
    </form>
  </div>
</nav>

<!-- 主内容区 -->
<main class="main-content">
  <div th:replace="~{${view} :: content}"></div>
</main>

<!--
  3. 核心 JavaScript 库
  !!! 再次确认：必须是 th:src !!!
-->
<script th:src="@{/js/jquery-3.7.1.slim.min.js}"></script>
<script th:src="@{/js/popper.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>

</body>
</html>
